{"level":"info","time":"2021-04-20 16:10:56","caller":"go-gin-api/main.go:70","msg":"server shutdown success","domain":"go-gin-api[fat]"}
{"level":"info","time":"2021-04-20 16:11:11","caller":"core/core.go:474","msg":"core-interceptor","domain":"go-gin-api[fat]","method":"GET","path":"/api/admin/info","http_code":401,"business_code":10104,"success":false,"cost_seconds":0.000483666,"trace_id":"43d8c81b2176766ad97b","trace_info":{"trace_id":"43d8c81b2176766ad97b","request":{"ttl":"un-limit","method":"GET","decoded_url":"/api/admin/info","header":{"Accept":["*/*"],"Accept-Encoding":["gzip, deflate, br"],"Accept-Language":["zh-CN,zh;q=0.9,en;q=0.8"],"Authorization":["admin lfAqSibCTVLRQngOWQKEYHuwnZIlV/GB7RjiiibH0x0="],"Authorization-Date":["2021-04-20 16:11:11"],"Connection":["keep-alive"],"Content-Type":["application/x-www-form-urlencoded; charset=utf-8"],"Referer":["http://127.0.0.1:9999/"],"Sec-Ch-Ua":["\"Google Chrome\";v=\"89\", \"Chromium\";v=\"89\", \";Not A Brand\";v=\"99\""],"Sec-Ch-Ua-Mobile":["?0"],"Sec-Fetch-Dest":["empty"],"Sec-Fetch-Mode":["cors"],"Sec-Fetch-Site":["same-origin"],"User-Agent":["Mozilla/5.0 (Macintosh; Intel Mac OS X 11_2_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.128 Safari/537.36"],"X-Requested-With":["XMLHttpRequest"]},"body":""},"response":{"header":{"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["43d8c81b2176766ad97b"],"Vary":["Origin"]},"body":{"HttpCode":401,"BusinessCode":10104,"Message":"签名信息有误","Err":{}},"business_code":10104,"business_code_msg":"签名信息有误","http_code":401,"http_code_msg":"Unauthorized","cost_seconds":0.00048304},"third_party_requests":null,"debugs":null,"sqls":null,"redis":null,"grpc":null,"success":false,"cost_seconds":0.000483666},"error":"Header 中缺少 Token 参数","errorVerbose":"Header 中缺少 Token 参数\nexams-api/internal/router/middleware.(*middleware).Token\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/router/middleware/middle_token.go:21\nexams-api/internal/pkg/core.WrapAuthHandler.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:135\nexams-api/internal/pkg/core.wrapHandlers.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:214\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func3\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:505\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func2\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:487\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:336\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/gin.go:409\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/gin.go:367\nexams-api/internal/pkg/core.(*mux).ServeHTTP\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:234\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:2887\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:1952\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1371\nexams-api/pkg/errno.(*err).WithErr\n\t/Users/zy/go_work/src/xueyang/go-gin-api/pkg/errno/errno.go:46\nexams-api/internal/router/middleware.(*middleware).Token\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/router/middleware/middle_token.go:21\nexams-api/internal/pkg/core.WrapAuthHandler.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:135\nexams-api/internal/pkg/core.wrapHandlers.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:214\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func3\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:505\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func2\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:487\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:336\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/gin.go:409\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/gin.go:367\nexams-api/internal/pkg/core.(*mux).ServeHTTP\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:234\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:2887\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:1952\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1371"}
{"level":"info","time":"2021-04-20 16:11:47","caller":"core/core.go:474","msg":"core-interceptor","domain":"go-gin-api[fat]","method":"GET","path":"/api/admin/info","http_code":401,"business_code":10104,"success":false,"cost_seconds":0.000269516,"trace_id":"710c5786ef22a0fe00fa","trace_info":{"trace_id":"710c5786ef22a0fe00fa","request":{"ttl":"un-limit","method":"GET","decoded_url":"/api/admin/info","header":{"Accept":["*/*"],"Accept-Encoding":["gzip, deflate, br"],"Accept-Language":["zh-CN,zh;q=0.9,en;q=0.8"],"Authorization":["admin HevZ7HEsSaqFOv0FSPc686T6yLxF/iOsg4nH7Cu+q6k="],"Authorization-Date":["2021-04-20 16:11:47"],"Connection":["keep-alive"],"Content-Type":["application/x-www-form-urlencoded; charset=utf-8"],"Referer":["http://127.0.0.1:9999/"],"Sec-Ch-Ua":["\"Google Chrome\";v=\"89\", \"Chromium\";v=\"89\", \";Not A Brand\";v=\"99\""],"Sec-Ch-Ua-Mobile":["?0"],"Sec-Fetch-Dest":["empty"],"Sec-Fetch-Mode":["cors"],"Sec-Fetch-Site":["same-origin"],"User-Agent":["Mozilla/5.0 (Macintosh; Intel Mac OS X 11_2_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.128 Safari/537.36"],"X-Requested-With":["XMLHttpRequest"]},"body":""},"response":{"header":{"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["710c5786ef22a0fe00fa"],"Vary":["Origin"]},"body":{"HttpCode":401,"BusinessCode":10104,"Message":"签名信息有误","Err":{}},"business_code":10104,"business_code_msg":"签名信息有误","http_code":401,"http_code_msg":"Unauthorized","cost_seconds":0.000268714},"third_party_requests":null,"debugs":null,"sqls":null,"redis":null,"grpc":null,"success":false,"cost_seconds":0.000269516},"error":"Header 中缺少 Token 参数","errorVerbose":"Header 中缺少 Token 参数\nexams-api/internal/router/middleware.(*middleware).Token\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/router/middleware/middle_token.go:21\nexams-api/internal/pkg/core.WrapAuthHandler.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:135\nexams-api/internal/pkg/core.wrapHandlers.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:214\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func3\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:505\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func2\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:487\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:336\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/gin.go:409\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/gin.go:367\nexams-api/internal/pkg/core.(*mux).ServeHTTP\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:234\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:2887\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:1952\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1371\nexams-api/pkg/errno.(*err).WithErr\n\t/Users/zy/go_work/src/xueyang/go-gin-api/pkg/errno/errno.go:46\nexams-api/internal/router/middleware.(*middleware).Token\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/router/middleware/middle_token.go:21\nexams-api/internal/pkg/core.WrapAuthHandler.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:135\nexams-api/internal/pkg/core.wrapHandlers.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:214\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func3\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:505\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func2\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:487\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:336\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/gin.go:409\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/gin.go:367\nexams-api/internal/pkg/core.(*mux).ServeHTTP\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:234\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:2887\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:1952\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1371"}
{"level":"info","time":"2021-04-20 16:12:15","caller":"core/core.go:474","msg":"core-interceptor","domain":"go-gin-api[fat]","method":"GET","path":"/api/admin/info","http_code":401,"business_code":10104,"success":false,"cost_seconds":0.00060112,"trace_id":"7122d7dabba7119459b8","trace_info":{"trace_id":"7122d7dabba7119459b8","request":{"ttl":"un-limit","method":"GET","decoded_url":"/api/admin/info","header":{"Accept":["*/*"],"Accept-Encoding":["gzip, deflate, br"],"Accept-Language":["zh-CN,zh;q=0.9,en;q=0.8"],"Authorization":["admin IEu/rWQwiImNWocgg7busxC2qisy8qDatUPRXbsiaww="],"Authorization-Date":["2021-04-20 16:12:15"],"Connection":["keep-alive"],"Content-Type":["application/x-www-form-urlencoded; charset=utf-8"],"Referer":["http://127.0.0.1:9999/"],"Sec-Ch-Ua":["\"Google Chrome\";v=\"89\", \"Chromium\";v=\"89\", \";Not A Brand\";v=\"99\""],"Sec-Ch-Ua-Mobile":["?0"],"Sec-Fetch-Dest":["empty"],"Sec-Fetch-Mode":["cors"],"Sec-Fetch-Site":["same-origin"],"User-Agent":["Mozilla/5.0 (Macintosh; Intel Mac OS X 11_2_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.128 Safari/537.36"],"X-Requested-With":["XMLHttpRequest"]},"body":""},"response":{"header":{"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["7122d7dabba7119459b8"],"Vary":["Origin"]},"body":{"HttpCode":401,"BusinessCode":10104,"Message":"签名信息有误","Err":{}},"business_code":10104,"business_code_msg":"签名信息有误","http_code":401,"http_code_msg":"Unauthorized","cost_seconds":0.000597001},"third_party_requests":null,"debugs":null,"sqls":null,"redis":null,"grpc":null,"success":false,"cost_seconds":0.00060112},"error":"Header 中缺少 Token 参数","errorVerbose":"Header 中缺少 Token 参数\nexams-api/internal/router/middleware.(*middleware).Token\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/router/middleware/middle_token.go:21\nexams-api/internal/pkg/core.WrapAuthHandler.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:135\nexams-api/internal/pkg/core.wrapHandlers.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:214\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func3\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:505\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func2\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:487\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:336\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/gin.go:409\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/gin.go:367\nexams-api/internal/pkg/core.(*mux).ServeHTTP\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:234\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:2887\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:1952\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1371\nexams-api/pkg/errno.(*err).WithErr\n\t/Users/zy/go_work/src/xueyang/go-gin-api/pkg/errno/errno.go:46\nexams-api/internal/router/middleware.(*middleware).Token\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/router/middleware/middle_token.go:21\nexams-api/internal/pkg/core.WrapAuthHandler.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:135\nexams-api/internal/pkg/core.wrapHandlers.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:214\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func3\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:505\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func2\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:487\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:336\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/gin.go:409\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/gin.go:367\nexams-api/internal/pkg/core.(*mux).ServeHTTP\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:234\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:2887\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:1952\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1371"}
{"level":"info","time":"2021-04-20 16:12:21","caller":"core/core.go:474","msg":"core-interceptor","domain":"go-gin-api[fat]","method":"POST","path":"/login/web","http_code":200,"business_code":0,"success":true,"cost_seconds":0.018551847,"trace_id":"9b7754f2b99b75ea31e5","trace_info":{"trace_id":"9b7754f2b99b75ea31e5","request":{"ttl":"un-limit","method":"POST","decoded_url":"/login/web","header":{"Accept":["*/*"],"Accept-Encoding":["gzip, deflate, br"],"Accept-Language":["zh-CN,zh;q=0.9,en;q=0.8"],"Authorization":["admin y/SckCke5pks6QeZWADQp00DVB9diJALhfmETu5OZ74="],"Authorization-Date":["2021-04-20 16:12:21"],"Connection":["keep-alive"],"Content-Length":["56"],"Content-Type":["application/x-www-form-urlencoded; charset=UTF-8"],"Origin":["http://127.0.0.1:9999"],"Referer":["http://127.0.0.1:9999/login"],"Sec-Ch-Ua":["\"Google Chrome\";v=\"89\", \"Chromium\";v=\"89\", \";Not A Brand\";v=\"99\""],"Sec-Ch-Ua-Mobile":["?0"],"Sec-Fetch-Dest":["empty"],"Sec-Fetch-Mode":["cors"],"Sec-Fetch-Site":["same-origin"],"User-Agent":["Mozilla/5.0 (Macintosh; Intel Mac OS X 11_2_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.128 Safari/537.36"],"X-Requested-With":["XMLHttpRequest"]},"body":"username=admin&password=21232f297a57a5a743894a0e4a801fc3"},"response":{"header":{"Access-Control-Allow-Credentials":["true"],"Access-Control-Allow-Origin":["*"],"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["9b7754f2b99b75ea31e5"],"Vary":["Origin"]},"body":{"token":"1ba4686338ee7354395ad13f7d3466c1"},"http_code":200,"http_code_msg":"OK","cost_seconds":0.018551436},"third_party_requests":null,"debugs":null,"sqls":[{"timestamp":"2021-04-20 16:12:21","stack":"/Users/zy/go_work/src/xueyang/go-gin-api/internal/api/repository/db_repo/authorized_repo/gen_authorized.go:80","sql":"SELECT * FROM `authorized` WHERE is_deleted = -1 AND business_key = 'admin' ORDER BY `authorized`.`id` LIMIT 1","rows_affected":1,"cost_seconds":0.006348574},{"timestamp":"2021-04-20 16:12:21","stack":"/Users/zy/go_work/src/xueyang/go-gin-api/internal/api/repository/db_repo/authorized_api_repo/gen_authorized_api.go:98","sql":"SELECT * FROM `authorized_api` WHERE is_deleted = -1 AND business_key = 'admin' ORDER BY id DESC ","rows_affected":5,"cost_seconds":0.00590791},{"timestamp":"2021-04-20 16:12:21","stack":"/Users/zy/go_work/src/xueyang/go-gin-api/internal/api/repository/db_repo/admin_repo/gen_admin.go:98","sql":"SELECT * FROM `admin` WHERE is_deleted = -1 AND username = 'admin' AND (password = 'f78382de80cf583cf854bbac0b6e796fbde36fe2739ca4ae072637010f179cb0') AND is_used = 1 LIMIT 1","rows_affected":1,"cost_seconds":0.004111518}],"redis":[{"timestamp":"2021-04-20 16:12:21","handle":"get","key":"go-gin-api:authorized:admin","cost_seconds":0.000406955},{"timestamp":"2021-04-20 16:12:21","handle":"set","key":"go-gin-api:authorized:admin","value":"{\"key\":\"admin\",\"secret\":\"12878dd962115106db6d\",\"is_used\":1,\"apis\":[{\"method\":\"PATCH\",\"api\":\"/api/**\"},{\"method\":\"DELETE\",\"api\":\"/api/**\"},{\"method\":\"PUT\",\"api\":\"/api/**\"},{\"method\":\"POST\",\"api\":\"/api/**\"},{\"method\":\"GET\",\"api\":\"/api/**\"}]}","cost_seconds":0.000772683},{"timestamp":"2021-04-20 16:12:21","handle":"set","key":"go-gin-api:admin:1ba4686338ee7354395ad13f7d3466c1","value":"{\"Id\":1,\"Username\":\"admin\",\"Password\":\"f78382de80cf583cf854bbac0b6e796fbde36fe2739ca4ae072637010f179cb0\",\"Nickname\":\"管理员\",\"Mobile\":\"13888888888\",\"IsUsed\":1,\"IsDeleted\":-1,\"CreatedAt\":\"2021-04-20T16:12:10+08:00\",\"CreatedUser\":\"init\",\"UpdatedAt\":\"2021-04-20T16:12:10+08:00\",\"UpdatedUser\":\"\"}","ttl":1440,"cost_seconds":0.000121358}],"grpc":null,"success":true,"cost_seconds":0.018551847}}
{"level":"info","time":"2021-04-20 16:12:22","caller":"core/core.go:474","msg":"core-interceptor","domain":"go-gin-api[fat]","method":"GET","path":"/api/admin/info","http_code":200,"business_code":0,"success":true,"cost_seconds":0.08314973,"trace_id":"ea880185dde98107fafc","trace_info":{"trace_id":"ea880185dde98107fafc","request":{"ttl":"un-limit","method":"GET","decoded_url":"/api/admin/info","header":{"Accept":["*/*"],"Accept-Encoding":["gzip, deflate, br"],"Accept-Language":["zh-CN,zh;q=0.9,en;q=0.8"],"Authorization":["admin xcPnJyaDLHek8GJeJbcdRvCn1K75ouRTPuupUnqGciY="],"Authorization-Date":["2021-04-20 16:12:21"],"Connection":["keep-alive"],"Content-Type":["application/x-www-form-urlencoded; charset=utf-8"],"Cookie":["_login_token_=1ba4686338ee7354395ad13f7d3466c1"],"Referer":["http://127.0.0.1:9999/"],"Sec-Ch-Ua":["\"Google Chrome\";v=\"89\", \"Chromium\";v=\"89\", \";Not A Brand\";v=\"99\""],"Sec-Ch-Ua-Mobile":["?0"],"Sec-Fetch-Dest":["empty"],"Sec-Fetch-Mode":["cors"],"Sec-Fetch-Site":["same-origin"],"Token":["1ba4686338ee7354395ad13f7d3466c1"],"User-Agent":["Mozilla/5.0 (Macintosh; Intel Mac OS X 11_2_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.128 Safari/537.36"],"X-Requested-With":["XMLHttpRequest"]},"body":""},"response":{"header":{"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["ea880185dde98107fafc"],"Vary":["Origin"]},"body":{"username":"admin","nickname":"管理员","mobile":"13888888888"},"http_code":200,"http_code_msg":"OK","cost_seconds":0.083146944},"third_party_requests":null,"debugs":null,"sqls":[{"timestamp":"2021-04-20 16:12:22","stack":"/Users/zy/go_work/src/xueyang/go-gin-api/internal/api/repository/db_repo/admin_repo/gen_admin.go:98","sql":"SELECT * FROM `admin` WHERE is_deleted = -1 AND id = 1 AND is_used = 1 LIMIT 1","rows_affected":1,"cost_seconds":0.000757504}],"redis":[{"timestamp":"2021-04-20 16:12:22","handle":"get","key":"go-gin-api:admin:1ba4686338ee7354395ad13f7d3466c1","cost_seconds":0.002913294},{"timestamp":"2021-04-20 16:12:22","handle":"get","key":"go-gin-api:authorized:admin","cost_seconds":0.000191793}],"grpc":null,"success":true,"cost_seconds":0.08314973}}
{"level":"info","time":"2021-04-20 16:14:24","caller":"core/core.go:474","msg":"core-interceptor","domain":"go-gin-api[fat]","method":"GET","path":"/api/authorized?page=1&page_size=10","http_code":200,"business_code":0,"success":true,"cost_seconds":0.006403587,"trace_id":"da170079dbf545ca52ac","trace_info":{"trace_id":"da170079dbf545ca52ac","request":{"ttl":"un-limit","method":"GET","decoded_url":"/api/authorized?page=1&page_size=10","header":{"Accept":["*/*"],"Accept-Encoding":["gzip, deflate, br"],"Accept-Language":["zh-CN,zh;q=0.9,en;q=0.8"],"Authorization":["admin U5XbPogyTM0GRGq2SxeVWU/NVN+8s68+n7psVYFsG7I="],"Authorization-Date":["2021-04-20 16:14:24"],"Connection":["keep-alive"],"Content-Type":["application/x-www-form-urlencoded; charset=utf-8"],"Cookie":["_login_token_=1ba4686338ee7354395ad13f7d3466c1; _nav_url_=%2Fauthorized%2Flist; _nav_title_=%E8%B0%83%E7%94%A8%E6%96%B9"],"Referer":["http://127.0.0.1:9999/authorized/list"],"Sec-Ch-Ua":["\"Google Chrome\";v=\"89\", \"Chromium\";v=\"89\", \";Not A Brand\";v=\"99\""],"Sec-Ch-Ua-Mobile":["?0"],"Sec-Fetch-Dest":["empty"],"Sec-Fetch-Mode":["cors"],"Sec-Fetch-Site":["same-origin"],"Token":["1ba4686338ee7354395ad13f7d3466c1"],"User-Agent":["Mozilla/5.0 (Macintosh; Intel Mac OS X 11_2_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.128 Safari/537.36"],"X-Requested-With":["XMLHttpRequest"]},"body":""},"response":{"header":{"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["da170079dbf545ca52ac"],"Vary":["Origin"]},"body":{"list":[{"id":1,"hashid":"zjON6am6eMdR","business_key":"admin","business_secret":"12878dd962115106db6d","business_developer":"管理员","remark":"管理面板调用","is_used":1,"created_at":"2021-04-20 16:12:10","created_user":"init","updated_at":"2021-04-20 16:12:10","updated_user":""}],"pagination":{"total":1,"current_page":1,"pre_page_count":10}},"http_code":200,"http_code_msg":"OK","cost_seconds":0.006402969},"third_party_requests":null,"debugs":null,"sqls":[{"timestamp":"2021-04-20 16:14:24","stack":"/Users/zy/go_work/src/xueyang/go-gin-api/internal/api/repository/db_repo/authorized_repo/gen_authorized.go:98","sql":"SELECT * FROM `authorized` WHERE is_deleted = -1 ORDER BY id DESC LIMIT 10","rows_affected":1,"cost_seconds":0.001390022},{"timestamp":"2021-04-20 16:14:24","stack":"/Users/zy/go_work/src/xueyang/go-gin-api/internal/api/repository/db_repo/authorized_repo/gen_authorized.go:71","sql":"SELECT count(1) FROM `authorized` WHERE is_deleted = -1 ","rows_affected":1,"cost_seconds":0.003242829}],"redis":[{"timestamp":"2021-04-20 16:14:24","handle":"get","key":"go-gin-api:admin:1ba4686338ee7354395ad13f7d3466c1","cost_seconds":0.000265727},{"timestamp":"2021-04-20 16:14:24","handle":"get","key":"go-gin-api:authorized:admin","cost_seconds":0.000218116}],"grpc":null,"success":true,"cost_seconds":0.006403587}}
{"level":"info","time":"2021-04-20 16:15:42","caller":"core/core.go:474","msg":"core-interceptor","domain":"go-gin-api[fat]","method":"GET","path":"/api/authorized?page=1&page_size=10","http_code":200,"business_code":0,"success":true,"cost_seconds":0.00222773,"trace_id":"b037eff94480f39cf40d","trace_info":{"trace_id":"b037eff94480f39cf40d","request":{"ttl":"un-limit","method":"GET","decoded_url":"/api/authorized?page=1&page_size=10","header":{"Accept":["*/*"],"Accept-Encoding":["gzip, deflate, br"],"Accept-Language":["zh-CN,zh;q=0.9,en;q=0.8"],"Authorization":["admin mDtSzQWCzNmVwqppL1DonXGNucotuMQ50/WhG7QAqro="],"Authorization-Date":["2021-04-20 16:15:42"],"Connection":["keep-alive"],"Content-Type":["application/x-www-form-urlencoded; charset=utf-8"],"Cookie":["_login_token_=1ba4686338ee7354395ad13f7d3466c1; _nav_url_=%2Fgormgen; _nav_title_=gormgen"],"Referer":["http://127.0.0.1:9999/authorized/list"],"Sec-Ch-Ua":["\"Google Chrome\";v=\"89\", \"Chromium\";v=\"89\", \";Not A Brand\";v=\"99\""],"Sec-Ch-Ua-Mobile":["?0"],"Sec-Fetch-Dest":["empty"],"Sec-Fetch-Mode":["cors"],"Sec-Fetch-Site":["same-origin"],"Token":["1ba4686338ee7354395ad13f7d3466c1"],"User-Agent":["Mozilla/5.0 (Macintosh; Intel Mac OS X 11_2_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.128 Safari/537.36"],"X-Requested-With":["XMLHttpRequest"]},"body":""},"response":{"header":{"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["b037eff94480f39cf40d"],"Vary":["Origin"]},"body":{"list":[{"id":1,"hashid":"zjON6am6eMdR","business_key":"admin","business_secret":"12878dd962115106db6d","business_developer":"管理员","remark":"管理面板调用","is_used":1,"created_at":"2021-04-20 16:12:10","created_user":"init","updated_at":"2021-04-20 16:12:10","updated_user":""}],"pagination":{"total":1,"current_page":1,"pre_page_count":10}},"http_code":200,"http_code_msg":"OK","cost_seconds":0.002227366},"third_party_requests":null,"debugs":null,"sqls":[{"timestamp":"2021-04-20 16:15:42","stack":"/Users/zy/go_work/src/xueyang/go-gin-api/internal/api/repository/db_repo/authorized_repo/gen_authorized.go:98","sql":"SELECT * FROM `authorized` WHERE is_deleted = -1 ORDER BY id DESC LIMIT 10","rows_affected":1,"cost_seconds":0.000756659},{"timestamp":"2021-04-20 16:15:42","stack":"/Users/zy/go_work/src/xueyang/go-gin-api/internal/api/repository/db_repo/authorized_repo/gen_authorized.go:71","sql":"SELECT count(1) FROM `authorized` WHERE is_deleted = -1 ","rows_affected":1,"cost_seconds":0.00051313}],"redis":[{"timestamp":"2021-04-20 16:15:42","handle":"get","key":"go-gin-api:admin:1ba4686338ee7354395ad13f7d3466c1","cost_seconds":0.000125527},{"timestamp":"2021-04-20 16:15:42","handle":"get","key":"go-gin-api:authorized:admin","cost_seconds":0.000134898}],"grpc":null,"success":true,"cost_seconds":0.00222773}}
{"level":"info","time":"2021-04-20 16:15:58","caller":"go-gin-api/main.go:70","msg":"server shutdown success","domain":"go-gin-api[fat]"}
{"level":"info","time":"2021-04-20 16:15:59","caller":"go-gin-api/main.go:80","msg":"dbw close success","domain":"go-gin-api[fat]"}
{"level":"info","time":"2021-04-20 16:15:59","caller":"go-gin-api/main.go:86","msg":"dbr close success","domain":"go-gin-api[fat]"}
{"level":"info","time":"2021-04-20 16:15:59","caller":"go-gin-api/main.go:97","msg":"cache close success","domain":"go-gin-api[fat]"}
{"level":"info","time":"2021-04-22 15:59:51","caller":"core/core.go:474","msg":"core-interceptor","domain":"go-gin-api[fat]","method":"GET","path":"/api/admin/info","http_code":401,"business_code":10104,"success":false,"cost_seconds":0.000288236,"trace_id":"b6e6718dbd15c770656b","trace_info":{"trace_id":"b6e6718dbd15c770656b","request":{"ttl":"un-limit","method":"GET","decoded_url":"/api/admin/info","header":{"Accept":["*/*"],"Accept-Encoding":["gzip, deflate, br"],"Accept-Language":["zh-CN,zh;q=0.9,en;q=0.8"],"Authorization":["admin HYVhr2qFD8+6qrVbDdgde2u0BxoQGYDCe5WWTkr/Jpk="],"Authorization-Date":["2021-04-22 15:59:51"],"Connection":["keep-alive"],"Content-Type":["application/x-www-form-urlencoded; charset=utf-8"],"Referer":["http://127.0.0.1:9999/"],"Sec-Ch-Ua":["\"Google Chrome\";v=\"89\", \"Chromium\";v=\"89\", \";Not A Brand\";v=\"99\""],"Sec-Ch-Ua-Mobile":["?0"],"Sec-Fetch-Dest":["empty"],"Sec-Fetch-Mode":["cors"],"Sec-Fetch-Site":["same-origin"],"User-Agent":["Mozilla/5.0 (Macintosh; Intel Mac OS X 11_2_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.128 Safari/537.36"],"X-Requested-With":["XMLHttpRequest"]},"body":""},"response":{"header":{"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["b6e6718dbd15c770656b"],"Vary":["Origin"]},"body":{"HttpCode":401,"BusinessCode":10104,"Message":"签名信息有误","Err":{}},"business_code":10104,"business_code_msg":"签名信息有误","http_code":401,"http_code_msg":"Unauthorized","cost_seconds":0.000287514},"third_party_requests":null,"debugs":null,"sqls":null,"redis":null,"grpc":null,"success":false,"cost_seconds":0.000288236},"error":"Header 中缺少 Token 参数","errorVerbose":"Header 中缺少 Token 参数\nexams-api/internal/router/middleware.(*middleware).Token\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/router/middleware/middle_token.go:21\nexams-api/internal/pkg/core.WrapAuthHandler.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:135\nexams-api/internal/pkg/core.wrapHandlers.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:214\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func3\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:505\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func2\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:487\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:336\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/gin.go:409\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/gin.go:367\nexams-api/internal/pkg/core.(*mux).ServeHTTP\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:234\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:2887\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:1952\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1371\nexams-api/pkg/errno.(*err).WithErr\n\t/Users/zy/go_work/src/xueyang/go-gin-api/pkg/errno/errno.go:46\nexams-api/internal/router/middleware.(*middleware).Token\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/router/middleware/middle_token.go:21\nexams-api/internal/pkg/core.WrapAuthHandler.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:135\nexams-api/internal/pkg/core.wrapHandlers.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:214\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func3\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:505\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func2\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:487\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:336\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/gin.go:409\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/gin.go:367\nexams-api/internal/pkg/core.(*mux).ServeHTTP\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:234\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:2887\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:1952\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1371"}
{"level":"info","time":"2021-04-22 15:59:59","caller":"core/core.go:474","msg":"core-interceptor","domain":"go-gin-api[fat]","method":"GET","path":"/api/admin/info","http_code":401,"business_code":10104,"success":false,"cost_seconds":0.000298107,"trace_id":"9fcec4962718e7267bc2","trace_info":{"trace_id":"9fcec4962718e7267bc2","request":{"ttl":"un-limit","method":"GET","decoded_url":"/api/admin/info","header":{"Accept":["*/*"],"Accept-Encoding":["gzip, deflate, br"],"Accept-Language":["zh-CN,zh;q=0.9,en;q=0.8"],"Authorization":["admin qC/2oQJJ8heuMsV/V6hdRs9DuHVpTxhhVha+IDVrMpQ="],"Authorization-Date":["2021-04-22 15:59:59"],"Connection":["keep-alive"],"Content-Type":["application/x-www-form-urlencoded; charset=utf-8"],"Referer":["http://127.0.0.1:9999/"],"Sec-Ch-Ua":["\"Google Chrome\";v=\"89\", \"Chromium\";v=\"89\", \";Not A Brand\";v=\"99\""],"Sec-Ch-Ua-Mobile":["?0"],"Sec-Fetch-Dest":["empty"],"Sec-Fetch-Mode":["cors"],"Sec-Fetch-Site":["same-origin"],"User-Agent":["Mozilla/5.0 (Macintosh; Intel Mac OS X 11_2_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.128 Safari/537.36"],"X-Requested-With":["XMLHttpRequest"]},"body":""},"response":{"header":{"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["9fcec4962718e7267bc2"],"Vary":["Origin"]},"body":{"HttpCode":401,"BusinessCode":10104,"Message":"签名信息有误","Err":{}},"business_code":10104,"business_code_msg":"签名信息有误","http_code":401,"http_code_msg":"Unauthorized","cost_seconds":0.000291086},"third_party_requests":null,"debugs":null,"sqls":null,"redis":null,"grpc":null,"success":false,"cost_seconds":0.000298107},"error":"Header 中缺少 Token 参数","errorVerbose":"Header 中缺少 Token 参数\nexams-api/internal/router/middleware.(*middleware).Token\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/router/middleware/middle_token.go:21\nexams-api/internal/pkg/core.WrapAuthHandler.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:135\nexams-api/internal/pkg/core.wrapHandlers.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:214\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func3\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:505\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func2\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:487\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:336\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/gin.go:409\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/gin.go:367\nexams-api/internal/pkg/core.(*mux).ServeHTTP\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:234\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:2887\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:1952\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1371\nexams-api/pkg/errno.(*err).WithErr\n\t/Users/zy/go_work/src/xueyang/go-gin-api/pkg/errno/errno.go:46\nexams-api/internal/router/middleware.(*middleware).Token\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/router/middleware/middle_token.go:21\nexams-api/internal/pkg/core.WrapAuthHandler.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:135\nexams-api/internal/pkg/core.wrapHandlers.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:214\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func3\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:505\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func2\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:487\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:336\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/gin.go:409\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/gin.go:367\nexams-api/internal/pkg/core.(*mux).ServeHTTP\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:234\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:2887\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:1952\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1371"}
{"level":"info","time":"2021-04-22 16:00:15","caller":"core/core.go:474","msg":"core-interceptor","domain":"go-gin-api[fat]","method":"GET","path":"/api/admin/info","http_code":401,"business_code":10104,"success":false,"cost_seconds":0.000132952,"trace_id":"b7912a2616d9bd4573c3","trace_info":{"trace_id":"b7912a2616d9bd4573c3","request":{"ttl":"un-limit","method":"GET","decoded_url":"/api/admin/info","header":{"Accept":["*/*"],"Accept-Encoding":["gzip, deflate, br"],"Accept-Language":["zh-CN,zh;q=0.9,en;q=0.8"],"Authorization":["admin j8wyyfQu3q1npW8qQ9da6tdxZhrtrSN7qOhxh/JF32Y="],"Authorization-Date":["2021-04-22 16:00:15"],"Connection":["keep-alive"],"Content-Type":["application/x-www-form-urlencoded; charset=utf-8"],"Referer":["http://127.0.0.1:9999/"],"Sec-Ch-Ua":["\"Google Chrome\";v=\"89\", \"Chromium\";v=\"89\", \";Not A Brand\";v=\"99\""],"Sec-Ch-Ua-Mobile":["?0"],"Sec-Fetch-Dest":["empty"],"Sec-Fetch-Mode":["cors"],"Sec-Fetch-Site":["same-origin"],"User-Agent":["Mozilla/5.0 (Macintosh; Intel Mac OS X 11_2_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.128 Safari/537.36"],"X-Requested-With":["XMLHttpRequest"]},"body":""},"response":{"header":{"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["b7912a2616d9bd4573c3"],"Vary":["Origin"]},"body":{"HttpCode":401,"BusinessCode":10104,"Message":"签名信息有误","Err":{}},"business_code":10104,"business_code_msg":"签名信息有误","http_code":401,"http_code_msg":"Unauthorized","cost_seconds":0.000132421},"third_party_requests":null,"debugs":null,"sqls":null,"redis":null,"grpc":null,"success":false,"cost_seconds":0.000132952},"error":"Header 中缺少 Token 参数","errorVerbose":"Header 中缺少 Token 参数\nexams-api/internal/router/middleware.(*middleware).Token\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/router/middleware/middle_token.go:21\nexams-api/internal/pkg/core.WrapAuthHandler.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:135\nexams-api/internal/pkg/core.wrapHandlers.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:214\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func3\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:505\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func2\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:487\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:336\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/gin.go:409\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/gin.go:367\nexams-api/internal/pkg/core.(*mux).ServeHTTP\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:234\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:2887\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:1952\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1371\nexams-api/pkg/errno.(*err).WithErr\n\t/Users/zy/go_work/src/xueyang/go-gin-api/pkg/errno/errno.go:46\nexams-api/internal/router/middleware.(*middleware).Token\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/router/middleware/middle_token.go:21\nexams-api/internal/pkg/core.WrapAuthHandler.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:135\nexams-api/internal/pkg/core.wrapHandlers.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:214\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func3\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:505\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func2\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:487\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:336\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/gin.go:409\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/gin.go:367\nexams-api/internal/pkg/core.(*mux).ServeHTTP\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:234\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:2887\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:1952\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1371"}
{"level":"info","time":"2021-04-22 16:03:11","caller":"core/core.go:474","msg":"core-interceptor","domain":"go-gin-api[fat]","method":"GET","path":"/api/admin/info","http_code":401,"business_code":10104,"success":false,"cost_seconds":0.00027234,"trace_id":"ca92df1f27a0c255d79f","trace_info":{"trace_id":"ca92df1f27a0c255d79f","request":{"ttl":"un-limit","method":"GET","decoded_url":"/api/admin/info","header":{"Accept":["*/*"],"Accept-Encoding":["gzip, deflate, br"],"Accept-Language":["zh-CN,zh;q=0.9,en;q=0.8"],"Authorization":["admin OEw4aM9Lsuhwk0y+g4fRkGld1ku+E13cXIiVbgoZojE="],"Authorization-Date":["2021-04-22 16:03:11"],"Connection":["keep-alive"],"Content-Type":["application/x-www-form-urlencoded; charset=utf-8"],"Referer":["http://127.0.0.1:9999/"],"Sec-Ch-Ua":["\"Google Chrome\";v=\"89\", \"Chromium\";v=\"89\", \";Not A Brand\";v=\"99\""],"Sec-Ch-Ua-Mobile":["?0"],"Sec-Fetch-Dest":["empty"],"Sec-Fetch-Mode":["cors"],"Sec-Fetch-Site":["same-origin"],"User-Agent":["Mozilla/5.0 (Macintosh; Intel Mac OS X 11_2_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.128 Safari/537.36"],"X-Requested-With":["XMLHttpRequest"]},"body":""},"response":{"header":{"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["ca92df1f27a0c255d79f"],"Vary":["Origin"]},"body":{"HttpCode":401,"BusinessCode":10104,"Message":"签名信息有误","Err":{}},"business_code":10104,"business_code_msg":"签名信息有误","http_code":401,"http_code_msg":"Unauthorized","cost_seconds":0.000267545},"third_party_requests":null,"debugs":null,"sqls":null,"redis":null,"grpc":null,"success":false,"cost_seconds":0.00027234},"error":"Header 中缺少 Token 参数","errorVerbose":"Header 中缺少 Token 参数\nexams-api/internal/router/middleware.(*middleware).Token\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/router/middleware/middle_token.go:21\nexams-api/internal/pkg/core.WrapAuthHandler.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:135\nexams-api/internal/pkg/core.wrapHandlers.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:214\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func3\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:505\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func2\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:487\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:336\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/gin.go:409\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/gin.go:367\nexams-api/internal/pkg/core.(*mux).ServeHTTP\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:234\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:2887\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:1952\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1371\nexams-api/pkg/errno.(*err).WithErr\n\t/Users/zy/go_work/src/xueyang/go-gin-api/pkg/errno/errno.go:46\nexams-api/internal/router/middleware.(*middleware).Token\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/router/middleware/middle_token.go:21\nexams-api/internal/pkg/core.WrapAuthHandler.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:135\nexams-api/internal/pkg/core.wrapHandlers.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:214\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func3\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:505\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func2\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:487\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:336\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/gin.go:409\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/gin.go:367\nexams-api/internal/pkg/core.(*mux).ServeHTTP\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:234\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:2887\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:1952\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1371"}
{"level":"info","time":"2021-04-22 16:03:40","caller":"core/core.go:474","msg":"core-interceptor","domain":"go-gin-api[fat]","method":"POST","path":"/api/admin/logout","http_code":401,"business_code":10104,"success":false,"cost_seconds":0.000147112,"trace_id":"5cf8deaa9885331d6a9f","trace_info":{"trace_id":"5cf8deaa9885331d6a9f","request":{"ttl":"un-limit","method":"POST","decoded_url":"/api/admin/logout","header":{"Accept":["*/*"],"Accept-Encoding":["gzip, deflate, br"],"Accept-Language":["zh-CN,zh;q=0.9,en;q=0.8"],"Authorization":["admin T5OxXFaOPRq0HVJA2hETsUwyiVxxVyaE7EbH+VJrrk0="],"Authorization-Date":["2021-04-22 16:03:40"],"Connection":["keep-alive"],"Content-Length":["0"],"Content-Type":["application/x-www-form-urlencoded; charset=utf-8"],"Cookie":["_nav_url_=%2Fconfig%2Femail; _nav_title_=%E5%91%8A%E8%AD%A6%E9%82%AE%E7%AE%B1"],"Origin":["http://127.0.0.1:9999"],"Referer":["http://127.0.0.1:9999/"],"Sec-Ch-Ua":["\"Google Chrome\";v=\"89\", \"Chromium\";v=\"89\", \";Not A Brand\";v=\"99\""],"Sec-Ch-Ua-Mobile":["?0"],"Sec-Fetch-Dest":["empty"],"Sec-Fetch-Mode":["cors"],"Sec-Fetch-Site":["same-origin"],"User-Agent":["Mozilla/5.0 (Macintosh; Intel Mac OS X 11_2_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.128 Safari/537.36"],"X-Requested-With":["XMLHttpRequest"]},"body":""},"response":{"header":{"Access-Control-Allow-Credentials":["true"],"Access-Control-Allow-Origin":["*"],"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["5cf8deaa9885331d6a9f"],"Vary":["Origin"]},"body":{"HttpCode":401,"BusinessCode":10104,"Message":"签名信息有误","Err":{}},"business_code":10104,"business_code_msg":"签名信息有误","http_code":401,"http_code_msg":"Unauthorized","cost_seconds":0.000146487},"third_party_requests":null,"debugs":null,"sqls":null,"redis":null,"grpc":null,"success":false,"cost_seconds":0.000147112},"error":"Header 中缺少 Token 参数","errorVerbose":"Header 中缺少 Token 参数\nexams-api/internal/router/middleware.(*middleware).Token\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/router/middleware/middle_token.go:21\nexams-api/internal/pkg/core.WrapAuthHandler.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:135\nexams-api/internal/pkg/core.wrapHandlers.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:214\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func3\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:505\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func2\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:487\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:336\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/gin.go:409\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/gin.go:367\nexams-api/internal/pkg/core.(*mux).ServeHTTP\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:234\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:2887\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:1952\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1371\nexams-api/pkg/errno.(*err).WithErr\n\t/Users/zy/go_work/src/xueyang/go-gin-api/pkg/errno/errno.go:46\nexams-api/internal/router/middleware.(*middleware).Token\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/router/middleware/middle_token.go:21\nexams-api/internal/pkg/core.WrapAuthHandler.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:135\nexams-api/internal/pkg/core.wrapHandlers.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:214\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func3\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:505\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func2\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:487\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:336\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/gin.go:409\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/gin.go:367\nexams-api/internal/pkg/core.(*mux).ServeHTTP\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:234\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:2887\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:1952\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1371"}
{"level":"info","time":"2021-04-22 16:03:46","caller":"core/core.go:474","msg":"core-interceptor","domain":"go-gin-api[fat]","method":"POST","path":"/login/web","http_code":200,"business_code":0,"success":true,"cost_seconds":0.202210426,"trace_id":"cf2c7651930f83438e81","trace_info":{"trace_id":"cf2c7651930f83438e81","request":{"ttl":"un-limit","method":"POST","decoded_url":"/login/web","header":{"Accept":["*/*"],"Accept-Encoding":["gzip, deflate, br"],"Accept-Language":["zh-CN,zh;q=0.9,en;q=0.8"],"Authorization":["admin jzV7lndzTEeIvkmswSZafr1TcQhd6QMm8fA6auCsfEs="],"Authorization-Date":["2021-04-22 16:03:46"],"Connection":["keep-alive"],"Content-Length":["56"],"Content-Type":["application/x-www-form-urlencoded; charset=UTF-8"],"Cookie":["_nav_url_=%2Fconfig%2Femail; _nav_title_=%E5%91%8A%E8%AD%A6%E9%82%AE%E7%AE%B1"],"Origin":["http://127.0.0.1:9999"],"Referer":["http://127.0.0.1:9999/login"],"Sec-Ch-Ua":["\"Google Chrome\";v=\"89\", \"Chromium\";v=\"89\", \";Not A Brand\";v=\"99\""],"Sec-Ch-Ua-Mobile":["?0"],"Sec-Fetch-Dest":["empty"],"Sec-Fetch-Mode":["cors"],"Sec-Fetch-Site":["same-origin"],"User-Agent":["Mozilla/5.0 (Macintosh; Intel Mac OS X 11_2_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.128 Safari/537.36"],"X-Requested-With":["XMLHttpRequest"]},"body":"username=admin&password=21232f297a57a5a743894a0e4a801fc3"},"response":{"header":{"Access-Control-Allow-Credentials":["true"],"Access-Control-Allow-Origin":["*"],"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["cf2c7651930f83438e81"],"Vary":["Origin"]},"body":{"token":"1ba4686338ee7354395ad13f7d3466c1"},"http_code":200,"http_code_msg":"OK","cost_seconds":0.202209801},"third_party_requests":null,"debugs":null,"sqls":[{"timestamp":"2021-04-22 16:03:46","stack":"/Users/zy/go_work/src/xueyang/go-gin-api/internal/api/repository/db_repo/admin_repo/gen_admin.go:98","sql":"SELECT * FROM `admin` WHERE is_deleted = -1 AND username = 'admin' AND (password = 'f78382de80cf583cf854bbac0b6e796fbde36fe2739ca4ae072637010f179cb0') AND is_used = 1 LIMIT 1","rows_affected":1,"cost_seconds":0.107714216}],"redis":[{"timestamp":"2021-04-22 16:03:46","handle":"get","key":"go-gin-api:authorized:admin","cost_seconds":0.049333852},{"timestamp":"2021-04-22 16:03:46","handle":"set","key":"go-gin-api:admin:1ba4686338ee7354395ad13f7d3466c1","value":"{\"Id\":1,\"Username\":\"admin\",\"Password\":\"f78382de80cf583cf854bbac0b6e796fbde36fe2739ca4ae072637010f179cb0\",\"Nickname\":\"管理员\",\"Mobile\":\"13888888888\",\"IsUsed\":1,\"IsDeleted\":-1,\"CreatedAt\":\"2021-04-20T16:12:10+08:00\",\"CreatedUser\":\"init\",\"UpdatedAt\":\"2021-04-20T16:12:10+08:00\",\"UpdatedUser\":\"\"}","ttl":1440,"cost_seconds":0.043509591}],"grpc":null,"success":true,"cost_seconds":0.202210426}}
{"level":"info","time":"2021-04-22 16:03:46","caller":"core/core.go:474","msg":"core-interceptor","domain":"go-gin-api[fat]","method":"GET","path":"/api/admin/info","http_code":200,"business_code":0,"success":true,"cost_seconds":0.047723116,"trace_id":"f37ee1ee40372b373447","trace_info":{"trace_id":"f37ee1ee40372b373447","request":{"ttl":"un-limit","method":"GET","decoded_url":"/api/admin/info","header":{"Accept":["*/*"],"Accept-Encoding":["gzip, deflate, br"],"Accept-Language":["zh-CN,zh;q=0.9,en;q=0.8"],"Authorization":["admin tMJEdlWOt/CX6qVWajShYn0GGRSCMbFk21hwr/KBhY0="],"Authorization-Date":["2021-04-22 16:03:46"],"Connection":["keep-alive"],"Content-Type":["application/x-www-form-urlencoded; charset=utf-8"],"Cookie":["_nav_url_=%2Fconfig%2Femail; _nav_title_=%E5%91%8A%E8%AD%A6%E9%82%AE%E7%AE%B1; _login_token_=1ba4686338ee7354395ad13f7d3466c1"],"Referer":["http://127.0.0.1:9999/"],"Sec-Ch-Ua":["\"Google Chrome\";v=\"89\", \"Chromium\";v=\"89\", \";Not A Brand\";v=\"99\""],"Sec-Ch-Ua-Mobile":["?0"],"Sec-Fetch-Dest":["empty"],"Sec-Fetch-Mode":["cors"],"Sec-Fetch-Site":["same-origin"],"Token":["1ba4686338ee7354395ad13f7d3466c1"],"User-Agent":["Mozilla/5.0 (Macintosh; Intel Mac OS X 11_2_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.128 Safari/537.36"],"X-Requested-With":["XMLHttpRequest"]},"body":""},"response":{"header":{"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["f37ee1ee40372b373447"],"Vary":["Origin"]},"body":{"username":"admin","nickname":"管理员","mobile":"13888888888"},"http_code":200,"http_code_msg":"OK","cost_seconds":0.047722446},"third_party_requests":null,"debugs":null,"sqls":[{"timestamp":"2021-04-22 16:03:46","stack":"/Users/zy/go_work/src/xueyang/go-gin-api/internal/api/repository/db_repo/admin_repo/gen_admin.go:98","sql":"SELECT * FROM `admin` WHERE is_deleted = -1 AND id = 1 AND is_used = 1 LIMIT 1","rows_affected":1,"cost_seconds":0.001056815}],"redis":[{"timestamp":"2021-04-22 16:03:46","handle":"get","key":"go-gin-api:admin:1ba4686338ee7354395ad13f7d3466c1","cost_seconds":0.011681068},{"timestamp":"2021-04-22 16:03:46","handle":"get","key":"go-gin-api:authorized:admin","cost_seconds":0.000163286}],"grpc":null,"success":true,"cost_seconds":0.047723116}}
{"level":"info","time":"2021-04-22 16:08:13","caller":"core/core.go:474","msg":"core-interceptor","domain":"go-gin-api[fat]","method":"POST","path":"/api/admin/logout","http_code":200,"business_code":0,"success":true,"cost_seconds":0.044714232,"trace_id":"e8eeeef679bbba0b153a","trace_info":{"trace_id":"e8eeeef679bbba0b153a","request":{"ttl":"un-limit","method":"POST","decoded_url":"/api/admin/logout","header":{"Accept":["*/*"],"Accept-Encoding":["gzip, deflate, br"],"Accept-Language":["zh-CN,zh;q=0.9,en;q=0.8"],"Authorization":["admin r1J5VPP7EO5T6UE1zegPoGECpwgfFK2EZ+3EtuXUqi8="],"Authorization-Date":["2021-04-22 16:08:13"],"Connection":["keep-alive"],"Content-Length":["0"],"Content-Type":["application/x-www-form-urlencoded; charset=utf-8"],"Cookie":["_login_token_=1ba4686338ee7354395ad13f7d3466c1; _nav_url_=%2Fconfig%2Fcode; _nav_title_=%E9%94%99%E8%AF%AF%E7%A0%81"],"Origin":["http://127.0.0.1:9999"],"Referer":["http://127.0.0.1:9999/"],"Sec-Ch-Ua":["\"Google Chrome\";v=\"89\", \"Chromium\";v=\"89\", \";Not A Brand\";v=\"99\""],"Sec-Ch-Ua-Mobile":["?0"],"Sec-Fetch-Dest":["empty"],"Sec-Fetch-Mode":["cors"],"Sec-Fetch-Site":["same-origin"],"Token":["1ba4686338ee7354395ad13f7d3466c1"],"User-Agent":["Mozilla/5.0 (Macintosh; Intel Mac OS X 11_2_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.128 Safari/537.36"],"X-Requested-With":["XMLHttpRequest"]},"body":""},"response":{"header":{"Access-Control-Allow-Credentials":["true"],"Access-Control-Allow-Origin":["*"],"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["e8eeeef679bbba0b153a"],"Vary":["Origin"]},"body":{"username":"admin"},"http_code":200,"http_code_msg":"OK","cost_seconds":0.044713778},"third_party_requests":null,"debugs":null,"sqls":null,"redis":[{"timestamp":"2021-04-22 16:08:13","handle":"get","key":"go-gin-api:admin:1ba4686338ee7354395ad13f7d3466c1","cost_seconds":0.000147469},{"timestamp":"2021-04-22 16:08:13","handle":"get","key":"go-gin-api:authorized:admin","cost_seconds":0.000142098},{"timestamp":"2021-04-22 16:08:13","handle":"del","key":"go-gin-api:admin:1ba4686338ee7354395ad13f7d3466c1","cost_seconds":0.000139049}],"grpc":null,"success":true,"cost_seconds":0.044714232}}
{"level":"info","time":"2021-04-22 16:08:22","caller":"core/core.go:474","msg":"core-interceptor","domain":"go-gin-api[fat]","method":"POST","path":"/login/web","http_code":200,"business_code":0,"success":true,"cost_seconds":0.008960868,"trace_id":"73150c2a2856e98b73f7","trace_info":{"trace_id":"73150c2a2856e98b73f7","request":{"ttl":"un-limit","method":"POST","decoded_url":"/login/web","header":{"Accept":["*/*"],"Accept-Encoding":["gzip, deflate, br"],"Accept-Language":["zh-CN,zh;q=0.9,en;q=0.8"],"Authorization":["admin dJspYkOfi0fhbVJCBlW6CuVseLclLcX+JDb7I7Z+kk0="],"Authorization-Date":["2021-04-22 16:08:22"],"Cache-Control":["no-cache"],"Connection":["keep-alive"],"Content-Length":["56"],"Content-Type":["application/x-www-form-urlencoded; charset=UTF-8"],"Cookie":["_nav_url_=; _nav_title_=; _login_token_="],"Origin":["http://127.0.0.1:9999"],"Pragma":["no-cache"],"Referer":["http://127.0.0.1:9999/login"],"Sec-Ch-Ua":["\"Google Chrome\";v=\"89\", \"Chromium\";v=\"89\", \";Not A Brand\";v=\"99\""],"Sec-Ch-Ua-Mobile":["?0"],"Sec-Fetch-Dest":["empty"],"Sec-Fetch-Mode":["cors"],"Sec-Fetch-Site":["same-origin"],"Token":[""],"User-Agent":["Mozilla/5.0 (Macintosh; Intel Mac OS X 11_2_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.128 Safari/537.36"],"X-Requested-With":["XMLHttpRequest"]},"body":"username=admin&password=21232f297a57a5a743894a0e4a801fc3"},"response":{"header":{"Access-Control-Allow-Credentials":["true"],"Access-Control-Allow-Origin":["*"],"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["73150c2a2856e98b73f7"],"Vary":["Origin"]},"body":{"token":"1ba4686338ee7354395ad13f7d3466c1"},"http_code":200,"http_code_msg":"OK","cost_seconds":0.008960108},"third_party_requests":null,"debugs":null,"sqls":[{"timestamp":"2021-04-22 16:08:22","stack":"/Users/zy/go_work/src/xueyang/go-gin-api/internal/api/repository/db_repo/admin_repo/gen_admin.go:98","sql":"SELECT * FROM `admin` WHERE is_deleted = -1 AND username = 'admin' AND (password = 'f78382de80cf583cf854bbac0b6e796fbde36fe2739ca4ae072637010f179cb0') AND is_used = 1 LIMIT 1","rows_affected":1,"cost_seconds":0.001976523}],"redis":[{"timestamp":"2021-04-22 16:08:22","handle":"get","key":"go-gin-api:authorized:admin","cost_seconds":0.006114796},{"timestamp":"2021-04-22 16:08:22","handle":"set","key":"go-gin-api:admin:1ba4686338ee7354395ad13f7d3466c1","value":"{\"Id\":1,\"Username\":\"admin\",\"Password\":\"f78382de80cf583cf854bbac0b6e796fbde36fe2739ca4ae072637010f179cb0\",\"Nickname\":\"管理员\",\"Mobile\":\"13888888888\",\"IsUsed\":1,\"IsDeleted\":-1,\"CreatedAt\":\"2021-04-20T16:12:10+08:00\",\"CreatedUser\":\"init\",\"UpdatedAt\":\"2021-04-20T16:12:10+08:00\",\"UpdatedUser\":\"\"}","ttl":1440,"cost_seconds":0.00048557}],"grpc":null,"success":true,"cost_seconds":0.008960868}}
{"level":"info","time":"2021-04-22 16:08:23","caller":"core/core.go:474","msg":"core-interceptor","domain":"go-gin-api[fat]","method":"GET","path":"/api/admin/info","http_code":200,"business_code":0,"success":true,"cost_seconds":0.004535484,"trace_id":"d3f1dcd916f9cedf9a49","trace_info":{"trace_id":"d3f1dcd916f9cedf9a49","request":{"ttl":"un-limit","method":"GET","decoded_url":"/api/admin/info","header":{"Accept":["*/*"],"Accept-Encoding":["gzip, deflate, br"],"Accept-Language":["zh-CN,zh;q=0.9,en;q=0.8"],"Authorization":["admin b8+EJZuTT4TJtSUHRdnKh8hvUDTp/NC6lhU2YQbRqOE="],"Authorization-Date":["2021-04-22 16:08:23"],"Cache-Control":["no-cache"],"Connection":["keep-alive"],"Content-Type":["application/x-www-form-urlencoded; charset=utf-8"],"Cookie":["_nav_url_=; _nav_title_=; _login_token_=1ba4686338ee7354395ad13f7d3466c1"],"Pragma":["no-cache"],"Referer":["http://127.0.0.1:9999/"],"Sec-Ch-Ua":["\"Google Chrome\";v=\"89\", \"Chromium\";v=\"89\", \";Not A Brand\";v=\"99\""],"Sec-Ch-Ua-Mobile":["?0"],"Sec-Fetch-Dest":["empty"],"Sec-Fetch-Mode":["cors"],"Sec-Fetch-Site":["same-origin"],"Token":["1ba4686338ee7354395ad13f7d3466c1"],"User-Agent":["Mozilla/5.0 (Macintosh; Intel Mac OS X 11_2_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.128 Safari/537.36"],"X-Requested-With":["XMLHttpRequest"]},"body":""},"response":{"header":{"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["d3f1dcd916f9cedf9a49"],"Vary":["Origin"]},"body":{"username":"admin","nickname":"管理员","mobile":"13888888888"},"http_code":200,"http_code_msg":"OK","cost_seconds":0.004533718},"third_party_requests":null,"debugs":null,"sqls":[{"timestamp":"2021-04-22 16:08:23","stack":"/Users/zy/go_work/src/xueyang/go-gin-api/internal/api/repository/db_repo/admin_repo/gen_admin.go:98","sql":"SELECT * FROM `admin` WHERE is_deleted = -1 AND id = 1 AND is_used = 1 LIMIT 1","rows_affected":1,"cost_seconds":0.003380525}],"redis":[{"timestamp":"2021-04-22 16:08:23","handle":"get","key":"go-gin-api:admin:1ba4686338ee7354395ad13f7d3466c1","cost_seconds":0.000157913},{"timestamp":"2021-04-22 16:08:23","handle":"get","key":"go-gin-api:authorized:admin","cost_seconds":0.000357251}],"grpc":null,"success":true,"cost_seconds":0.004535484}}
{"level":"info","time":"2021-04-22 16:17:26","caller":"core/core.go:474","msg":"core-interceptor","domain":"go-gin-api[fat]","method":"GET","path":"/api/authorized?page=1&page_size=10","http_code":200,"business_code":0,"success":true,"cost_seconds":0.042624323,"trace_id":"09bd497c3dddb1567d13","trace_info":{"trace_id":"09bd497c3dddb1567d13","request":{"ttl":"un-limit","method":"GET","decoded_url":"/api/authorized?page=1&page_size=10","header":{"Accept":["*/*"],"Accept-Encoding":["gzip, deflate, br"],"Accept-Language":["zh-CN,zh;q=0.9,en;q=0.8"],"Authorization":["admin n1Ft7GV1dBO3RznAlVrpRm8VpGXbLIp1f+FVTBHoDCA="],"Authorization-Date":["2021-04-22 16:17:26"],"Cache-Control":["no-cache"],"Connection":["keep-alive"],"Content-Type":["application/x-www-form-urlencoded; charset=utf-8"],"Cookie":["_login_token_=1ba4686338ee7354395ad13f7d3466c1; _nav_url_=%2Fauthorized%2Flist; _nav_title_=%E8%B0%83%E7%94%A8%E6%96%B9"],"Pragma":["no-cache"],"Referer":["http://127.0.0.1:9999/authorized/list"],"Sec-Ch-Ua":["\"Google Chrome\";v=\"89\", \"Chromium\";v=\"89\", \";Not A Brand\";v=\"99\""],"Sec-Ch-Ua-Mobile":["?0"],"Sec-Fetch-Dest":["empty"],"Sec-Fetch-Mode":["cors"],"Sec-Fetch-Site":["same-origin"],"Token":["1ba4686338ee7354395ad13f7d3466c1"],"User-Agent":["Mozilla/5.0 (Macintosh; Intel Mac OS X 11_2_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.128 Safari/537.36"],"X-Requested-With":["XMLHttpRequest"]},"body":""},"response":{"header":{"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["09bd497c3dddb1567d13"],"Vary":["Origin"]},"body":{"list":[{"id":1,"hashid":"zjON6am6eMdR","business_key":"admin","business_secret":"12878dd962115106db6d","business_developer":"管理员","remark":"管理面板调用","is_used":1,"created_at":"2021-04-20 16:12:10","created_user":"init","updated_at":"2021-04-20 16:12:10","updated_user":""}],"pagination":{"total":1,"current_page":1,"pre_page_count":10}},"http_code":200,"http_code_msg":"OK","cost_seconds":0.042623602},"third_party_requests":null,"debugs":null,"sqls":[{"timestamp":"2021-04-22 16:17:26","stack":"/Users/zy/go_work/src/xueyang/go-gin-api/internal/api/repository/db_repo/authorized_repo/gen_authorized.go:98","sql":"SELECT * FROM `authorized` WHERE is_deleted = -1 ORDER BY id DESC LIMIT 10","rows_affected":1,"cost_seconds":0.032143329},{"timestamp":"2021-04-22 16:17:26","stack":"/Users/zy/go_work/src/xueyang/go-gin-api/internal/api/repository/db_repo/authorized_repo/gen_authorized.go:71","sql":"SELECT count(1) FROM `authorized` WHERE is_deleted = -1 ","rows_affected":1,"cost_seconds":0.007399658}],"redis":[{"timestamp":"2021-04-22 16:17:26","handle":"get","key":"go-gin-api:admin:1ba4686338ee7354395ad13f7d3466c1","cost_seconds":0.000206682},{"timestamp":"2021-04-22 16:17:26","handle":"get","key":"go-gin-api:authorized:admin","cost_seconds":0.000106215}],"grpc":null,"success":true,"cost_seconds":0.042624323}}
{"level":"info","time":"2021-04-22 16:20:47","caller":"core/core.go:474","msg":"core-interceptor","domain":"go-gin-api[fat]","method":"GET","path":"/api/authorized?page=1&page_size=10","http_code":200,"business_code":0,"success":true,"cost_seconds":0.013484388,"trace_id":"eafbabb1a4d5c48167c9","trace_info":{"trace_id":"eafbabb1a4d5c48167c9","request":{"ttl":"un-limit","method":"GET","decoded_url":"/api/authorized?page=1&page_size=10","header":{"Accept":["*/*"],"Accept-Encoding":["gzip, deflate, br"],"Accept-Language":["zh-CN,zh;q=0.9,en;q=0.8"],"Authorization":["admin LqDHH4Xm9Flrf4uMMEwBACfthEqnRjhBIOk02EvV10k="],"Authorization-Date":["2021-04-22 16:20:47"],"Connection":["keep-alive"],"Content-Type":["application/x-www-form-urlencoded; charset=utf-8"],"Cookie":["_login_token_=1ba4686338ee7354395ad13f7d3466c1; _nav_url_=%2Fauthorized%2Fdemo; _nav_title_=%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E"],"Referer":["http://127.0.0.1:9999/authorized/list"],"Sec-Ch-Ua":["\"Google Chrome\";v=\"89\", \"Chromium\";v=\"89\", \";Not A Brand\";v=\"99\""],"Sec-Ch-Ua-Mobile":["?0"],"Sec-Fetch-Dest":["empty"],"Sec-Fetch-Mode":["cors"],"Sec-Fetch-Site":["same-origin"],"Token":["1ba4686338ee7354395ad13f7d3466c1"],"User-Agent":["Mozilla/5.0 (Macintosh; Intel Mac OS X 11_2_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.128 Safari/537.36"],"X-Requested-With":["XMLHttpRequest"]},"body":""},"response":{"header":{"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["eafbabb1a4d5c48167c9"],"Vary":["Origin"]},"body":{"list":[{"id":1,"hashid":"zjON6am6eMdR","business_key":"admin","business_secret":"12878dd962115106db6d","business_developer":"管理员","remark":"管理面板调用","is_used":1,"created_at":"2021-04-20 16:12:10","created_user":"init","updated_at":"2021-04-20 16:12:10","updated_user":""}],"pagination":{"total":1,"current_page":1,"pre_page_count":10}},"http_code":200,"http_code_msg":"OK","cost_seconds":0.01348371},"third_party_requests":null,"debugs":null,"sqls":[{"timestamp":"2021-04-22 16:20:47","stack":"/Users/zy/go_work/src/xueyang/go-gin-api/internal/api/repository/db_repo/authorized_repo/gen_authorized.go:98","sql":"SELECT * FROM `authorized` WHERE is_deleted = -1 ORDER BY id DESC LIMIT 10","rows_affected":1,"cost_seconds":0.005222014},{"timestamp":"2021-04-22 16:20:47","stack":"/Users/zy/go_work/src/xueyang/go-gin-api/internal/api/repository/db_repo/authorized_repo/gen_authorized.go:71","sql":"SELECT count(1) FROM `authorized` WHERE is_deleted = -1 ","rows_affected":1,"cost_seconds":0.000868223}],"redis":[{"timestamp":"2021-04-22 16:20:47","handle":"get","key":"go-gin-api:admin:1ba4686338ee7354395ad13f7d3466c1","cost_seconds":0.002539284},{"timestamp":"2021-04-22 16:20:47","handle":"get","key":"go-gin-api:authorized:admin","cost_seconds":0.000320488}],"grpc":null,"success":true,"cost_seconds":0.013484388}}
{"level":"info","time":"2021-04-22 16:23:19","caller":"go-gin-api/main.go:70","msg":"server shutdown success","domain":"go-gin-api[fat]"}
{"level":"info","time":"2021-04-22 16:23:19","caller":"go-gin-api/main.go:80","msg":"dbw close success","domain":"go-gin-api[fat]"}
{"level":"info","time":"2021-04-22 16:23:19","caller":"go-gin-api/main.go:86","msg":"dbr close success","domain":"go-gin-api[fat]"}
{"level":"info","time":"2021-04-22 16:23:19","caller":"go-gin-api/main.go:97","msg":"cache close success","domain":"go-gin-api[fat]"}
{"level":"info","time":"2021-04-22 16:24:32","caller":"go-gin-api/main.go:70","msg":"server shutdown success","domain":"go-gin-api[fat]"}
{"level":"info","time":"2021-04-22 16:24:32","caller":"go-gin-api/main.go:80","msg":"dbw close success","domain":"go-gin-api[fat]"}
{"level":"info","time":"2021-04-22 16:24:32","caller":"go-gin-api/main.go:86","msg":"dbr close success","domain":"go-gin-api[fat]"}
{"level":"info","time":"2021-04-22 16:24:32","caller":"go-gin-api/main.go:97","msg":"cache close success","domain":"go-gin-api[fat]"}
{"level":"info","time":"2021-04-22 16:54:53","caller":"core/core.go:474","msg":"core-interceptor","domain":"go-gin-api[fat]","method":"GET","path":"/api/admin/info","http_code":200,"business_code":0,"success":true,"cost_seconds":0.094263716,"trace_id":"17720a4e16e1039649c2","trace_info":{"trace_id":"17720a4e16e1039649c2","request":{"ttl":"un-limit","method":"GET","decoded_url":"/api/admin/info","header":{"Accept":["*/*"],"Accept-Encoding":["gzip, deflate, br"],"Accept-Language":["zh-CN,zh;q=0.9,en;q=0.8"],"Authorization":["admin YUOFQM7zeQYMW+n1KyKv5UtyjZ/SvrNwkyEcKPeA+OE="],"Authorization-Date":["2021-04-22 16:54:53"],"Connection":["keep-alive"],"Content-Type":["application/x-www-form-urlencoded; charset=utf-8"],"Cookie":["_login_token_=1ba4686338ee7354395ad13f7d3466c1; _nav_url_=%2Fdashboard; _nav_title_=%20%E4%BB%AA%E8%A1%A8%E7%9B%98"],"Referer":["http://127.0.0.1:9999/"],"Sec-Ch-Ua":["\"Google Chrome\";v=\"89\", \"Chromium\";v=\"89\", \";Not A Brand\";v=\"99\""],"Sec-Ch-Ua-Mobile":["?0"],"Sec-Fetch-Dest":["empty"],"Sec-Fetch-Mode":["cors"],"Sec-Fetch-Site":["same-origin"],"Token":["1ba4686338ee7354395ad13f7d3466c1"],"User-Agent":["Mozilla/5.0 (Macintosh; Intel Mac OS X 11_2_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.128 Safari/537.36"],"X-Requested-With":["XMLHttpRequest"]},"body":""},"response":{"header":{"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["17720a4e16e1039649c2"],"Vary":["Origin"]},"body":{"username":"admin","nickname":"管理员","mobile":"13888888888"},"http_code":200,"http_code_msg":"OK","cost_seconds":0.094263157},"third_party_requests":null,"debugs":null,"sqls":[{"timestamp":"2021-04-22 16:54:53","stack":"/Users/zy/go_work/src/xueyang/go-gin-api/internal/api/repository/db_repo/admin_repo/gen_admin.go:98","sql":"SELECT * FROM `admin` WHERE is_deleted = -1 AND id = 1 AND is_used = 1 LIMIT 1","rows_affected":1,"cost_seconds":0.004052919}],"redis":[{"timestamp":"2021-04-22 16:54:53","handle":"get","key":"go-gin-api:admin:1ba4686338ee7354395ad13f7d3466c1","cost_seconds":0.000293783},{"timestamp":"2021-04-22 16:54:53","handle":"get","key":"go-gin-api:authorized:admin","cost_seconds":0.000190396}],"grpc":null,"success":true,"cost_seconds":0.094263716}}
{"level":"info","time":"2021-04-22 16:55:06","caller":"core/core.go:474","msg":"core-interceptor","domain":"go-gin-api[fat]","method":"GET","path":"/api/authorized?page=1&page_size=10","http_code":200,"business_code":0,"success":true,"cost_seconds":0.011669493,"trace_id":"2827ed041754878e6527","trace_info":{"trace_id":"2827ed041754878e6527","request":{"ttl":"un-limit","method":"GET","decoded_url":"/api/authorized?page=1&page_size=10","header":{"Accept":["*/*"],"Accept-Encoding":["gzip, deflate, br"],"Accept-Language":["zh-CN,zh;q=0.9,en;q=0.8"],"Authorization":["admin rE8hi/pnFz1wprLemFFElcDYdXosjJTlvQO1ODkkSgI="],"Authorization-Date":["2021-04-22 16:55:06"],"Connection":["keep-alive"],"Content-Type":["application/x-www-form-urlencoded; charset=utf-8"],"Cookie":["_login_token_=1ba4686338ee7354395ad13f7d3466c1; _nav_url_=%2Fauthorized%2Flist; _nav_title_=%E8%B0%83%E7%94%A8%E6%96%B9"],"Referer":["http://127.0.0.1:9999/authorized/list"],"Sec-Ch-Ua":["\"Google Chrome\";v=\"89\", \"Chromium\";v=\"89\", \";Not A Brand\";v=\"99\""],"Sec-Ch-Ua-Mobile":["?0"],"Sec-Fetch-Dest":["empty"],"Sec-Fetch-Mode":["cors"],"Sec-Fetch-Site":["same-origin"],"Token":["1ba4686338ee7354395ad13f7d3466c1"],"User-Agent":["Mozilla/5.0 (Macintosh; Intel Mac OS X 11_2_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.128 Safari/537.36"],"X-Requested-With":["XMLHttpRequest"]},"body":""},"response":{"header":{"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["2827ed041754878e6527"],"Vary":["Origin"]},"body":{"list":[{"id":1,"hashid":"zjON6am6eMdR","business_key":"admin","business_secret":"12878dd962115106db6d","business_developer":"管理员","remark":"管理面板调用","is_used":1,"created_at":"2021-04-20 16:12:10","created_user":"init","updated_at":"2021-04-20 16:12:10","updated_user":""}],"pagination":{"total":1,"current_page":1,"pre_page_count":10}},"http_code":200,"http_code_msg":"OK","cost_seconds":0.011666919},"third_party_requests":null,"debugs":null,"sqls":[{"timestamp":"2021-04-22 16:55:06","stack":"/Users/zy/go_work/src/xueyang/go-gin-api/internal/api/repository/db_repo/authorized_repo/gen_authorized.go:98","sql":"SELECT * FROM `authorized` WHERE is_deleted = -1 ORDER BY id DESC LIMIT 10","rows_affected":1,"cost_seconds":0.004758829},{"timestamp":"2021-04-22 16:55:06","stack":"/Users/zy/go_work/src/xueyang/go-gin-api/internal/api/repository/db_repo/authorized_repo/gen_authorized.go:71","sql":"SELECT count(1) FROM `authorized` WHERE is_deleted = -1 ","rows_affected":1,"cost_seconds":0.000758223}],"redis":[{"timestamp":"2021-04-22 16:55:06","handle":"get","key":"go-gin-api:admin:1ba4686338ee7354395ad13f7d3466c1","cost_seconds":0.001238225},{"timestamp":"2021-04-22 16:55:06","handle":"get","key":"go-gin-api:authorized:admin","cost_seconds":0.001795779}],"grpc":null,"success":true,"cost_seconds":0.011669493}}
{"level":"info","time":"2021-04-22 16:55:25","caller":"core/core.go:474","msg":"core-interceptor","domain":"go-gin-api[fat]","method":"GET","path":"/api/admin?page=1&page_size=10","http_code":200,"business_code":0,"success":true,"cost_seconds":0.002628643,"trace_id":"f788f732c3d83fd15ab9","trace_info":{"trace_id":"f788f732c3d83fd15ab9","request":{"ttl":"un-limit","method":"GET","decoded_url":"/api/admin?page=1&page_size=10","header":{"Accept":["*/*"],"Accept-Encoding":["gzip, deflate, br"],"Accept-Language":["zh-CN,zh;q=0.9,en;q=0.8"],"Authorization":["admin 5glK/9q8v6y4cMK2Cdlo1vtJJCW6qEQTucB0u7N7Eco="],"Authorization-Date":["2021-04-22 16:55:25"],"Connection":["keep-alive"],"Content-Type":["application/x-www-form-urlencoded; charset=utf-8"],"Cookie":["_login_token_=1ba4686338ee7354395ad13f7d3466c1; _nav_url_=%2Fadmin%2Flist; _nav_title_=%E7%AE%A1%E7%90%86%E5%91%98"],"Referer":["http://127.0.0.1:9999/admin/list"],"Sec-Ch-Ua":["\"Google Chrome\";v=\"89\", \"Chromium\";v=\"89\", \";Not A Brand\";v=\"99\""],"Sec-Ch-Ua-Mobile":["?0"],"Sec-Fetch-Dest":["empty"],"Sec-Fetch-Mode":["cors"],"Sec-Fetch-Site":["same-origin"],"Token":["1ba4686338ee7354395ad13f7d3466c1"],"User-Agent":["Mozilla/5.0 (Macintosh; Intel Mac OS X 11_2_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.128 Safari/537.36"],"X-Requested-With":["XMLHttpRequest"]},"body":""},"response":{"header":{"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["f788f732c3d83fd15ab9"],"Vary":["Origin"]},"body":{"list":[{"id":1,"hashid":"zjON6am6eMdR","username":"admin","nickname":"管理员","mobile":"13888888888","is_used":1,"created_at":"2021-04-20 16:12:10","created_user":"init","updated_at":"2021-04-20 16:12:10","updated_user":""}],"pagination":{"total":1,"current_page":1,"pre_page_count":10}},"http_code":200,"http_code_msg":"OK","cost_seconds":0.00262826},"third_party_requests":null,"debugs":null,"sqls":[{"timestamp":"2021-04-22 16:55:25","stack":"/Users/zy/go_work/src/xueyang/go-gin-api/internal/api/repository/db_repo/admin_repo/gen_admin.go:98","sql":"SELECT * FROM `admin` WHERE is_deleted = -1 ORDER BY id DESC LIMIT 10","rows_affected":1,"cost_seconds":0.000687746},{"timestamp":"2021-04-22 16:55:25","stack":"/Users/zy/go_work/src/xueyang/go-gin-api/internal/api/repository/db_repo/admin_repo/gen_admin.go:71","sql":"SELECT count(1) FROM `admin` WHERE is_deleted = -1 ","rows_affected":1,"cost_seconds":0.000602193}],"redis":[{"timestamp":"2021-04-22 16:55:25","handle":"get","key":"go-gin-api:admin:1ba4686338ee7354395ad13f7d3466c1","cost_seconds":0.000478985},{"timestamp":"2021-04-22 16:55:25","handle":"get","key":"go-gin-api:authorized:admin","cost_seconds":0.000163499}],"grpc":null,"success":true,"cost_seconds":0.002628643}}
{"level":"info","time":"2021-04-22 16:56:31","caller":"core/core.go:474","msg":"core-interceptor","domain":"go-gin-api[fat]","method":"GET","path":"/api/admin?page=1&page_size=10","http_code":401,"business_code":10104,"success":false,"cost_seconds":0.000295486,"trace_id":"55de05d5916820274eda","trace_info":{"trace_id":"55de05d5916820274eda","request":{"ttl":"un-limit","method":"GET","decoded_url":"/api/admin?page=1&page_size=10","header":{"Accept":["*/*"],"Accept-Encoding":["gzip, deflate, br"],"Cache-Control":["no-cache"],"Connection":["keep-alive"],"Postman-Token":["52e2c063-8143-49b7-ad98-1c23da281ca9"],"User-Agent":["PostmanRuntime/7.26.10"]},"body":""},"response":{"header":{"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["55de05d5916820274eda"],"Vary":["Origin"]},"body":{"HttpCode":401,"BusinessCode":10104,"Message":"签名信息有误","Err":{}},"business_code":10104,"business_code_msg":"签名信息有误","http_code":401,"http_code_msg":"Unauthorized","cost_seconds":0.000295073},"third_party_requests":null,"debugs":null,"sqls":null,"redis":null,"grpc":null,"success":false,"cost_seconds":0.000295486},"error":"Header 中缺少 Token 参数","errorVerbose":"Header 中缺少 Token 参数\nexams-api/internal/router/middleware.(*middleware).Token\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/router/middleware/middle_token.go:21\nexams-api/internal/pkg/core.WrapAuthHandler.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:135\nexams-api/internal/pkg/core.wrapHandlers.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:214\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func3\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:505\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func2\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:487\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:336\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/gin.go:409\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/gin.go:367\nexams-api/internal/pkg/core.(*mux).ServeHTTP\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:234\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:2887\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:1952\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1371\nexams-api/pkg/errno.(*err).WithErr\n\t/Users/zy/go_work/src/xueyang/go-gin-api/pkg/errno/errno.go:46\nexams-api/internal/router/middleware.(*middleware).Token\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/router/middleware/middle_token.go:21\nexams-api/internal/pkg/core.WrapAuthHandler.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:135\nexams-api/internal/pkg/core.wrapHandlers.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:214\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func3\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:505\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func2\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:487\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:336\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/gin.go:409\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/gin.go:367\nexams-api/internal/pkg/core.(*mux).ServeHTTP\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:234\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:2887\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:1952\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1371"}
{"level":"info","time":"2021-04-22 17:00:21","caller":"core/core.go:474","msg":"core-interceptor","domain":"go-gin-api[fat]","method":"PATCH","path":"/api/config/email","http_code":400,"business_code":20401,"success":false,"cost_seconds":0.894504511,"trace_id":"a63ada0462cd5fee1dc6","trace_info":{"trace_id":"a63ada0462cd5fee1dc6","request":{"ttl":"un-limit","method":"PATCH","decoded_url":"/api/config/email","header":{"Accept":["*/*"],"Accept-Encoding":["gzip, deflate, br"],"Accept-Language":["zh-CN,zh;q=0.9,en;q=0.8"],"Authorization":["admin MY2UDEBgQZ8PGH9rFNPyMNG6CYoqF3kiMZzB7YfHQIk="],"Authorization-Date":["2021-04-22 17:00:20"],"Connection":["keep-alive"],"Content-Length":["90"],"Content-Type":["application/x-www-form-urlencoded; charset=UTF-8"],"Cookie":["_login_token_=1ba4686338ee7354395ad13f7d3466c1; _nav_url_=%2Fconfig%2Femail; _nav_title_=%E5%91%8A%E8%AD%A6%E9%82%AE%E7%AE%B1"],"Origin":["http://127.0.0.1:9999"],"Referer":["http://127.0.0.1:9999/config/email"],"Sec-Ch-Ua":["\"Google Chrome\";v=\"89\", \"Chromium\";v=\"89\", \";Not A Brand\";v=\"99\""],"Sec-Ch-Ua-Mobile":["?0"],"Sec-Fetch-Dest":["empty"],"Sec-Fetch-Mode":["cors"],"Sec-Fetch-Site":["same-origin"],"Token":["1ba4686338ee7354395ad13f7d3466c1"],"User-Agent":["Mozilla/5.0 (Macintosh; Intel Mac OS X 11_2_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.128 Safari/537.36"],"X-Requested-With":["XMLHttpRequest"]},"body":"host=smtp.163.com&port=465&user=xueyangkk%40gmail.com&pass=123123&to=xueyangkk%40gmail.com"},"response":{"header":{"Access-Control-Allow-Credentials":["true"],"Access-Control-Allow-Origin":["*"],"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["a63ada0462cd5fee1dc6"],"Vary":["Origin"]},"body":{"HttpCode":400,"BusinessCode":20401,"Message":"Mail Send error: 535 Error: authentication failed","Err":{}},"business_code":20401,"business_code_msg":"Mail Send error: 535 Error: authentication failed","http_code":400,"http_code_msg":"Bad Request","cost_seconds":0.894503917},"third_party_requests":null,"debugs":null,"sqls":null,"redis":[{"timestamp":"2021-04-22 17:00:20","handle":"get","key":"go-gin-api:admin:1ba4686338ee7354395ad13f7d3466c1","cost_seconds":0.000173491},{"timestamp":"2021-04-22 17:00:20","handle":"get","key":"go-gin-api:authorized:admin","cost_seconds":0.000123813}],"grpc":null,"success":false,"cost_seconds":0.894504511},"error":"535 Error: authentication failed","errorVerbose":"535 Error: authentication failed\nexams-api/pkg/errno.(*err).WithErr\n\t/Users/zy/go_work/src/xueyang/go-gin-api/pkg/errno/errno.go:46\nexams-api/internal/api/controller/config_handler.(*handler).Email.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/api/controller/config_handler/func_email.go:70\nexams-api/internal/pkg/core.wrapHandlers.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:214\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func3\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:505\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func2\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:487\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:336\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/gin.go:409\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/gin.go:367\nexams-api/internal/pkg/core.(*mux).ServeHTTP\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:234\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:2887\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:1952\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1371"}
{"level":"info","time":"2021-04-22 17:00:26","caller":"core/core.go:474","msg":"core-interceptor","domain":"go-gin-api[fat]","method":"GET","path":"/api/admin/info","http_code":200,"business_code":0,"success":true,"cost_seconds":0.005773764,"trace_id":"0e280059b0d29459d627","trace_info":{"trace_id":"0e280059b0d29459d627","request":{"ttl":"un-limit","method":"GET","decoded_url":"/api/admin/info","header":{"Accept":["*/*"],"Accept-Encoding":["gzip, deflate, br"],"Accept-Language":["zh-CN,zh;q=0.9,en;q=0.8"],"Authorization":["admin tSjaT1JJlcAO7zSUMjJR2GeKgjPzzLpqoShiWnBiC38="],"Authorization-Date":["2021-04-22 17:00:26"],"Connection":["keep-alive"],"Content-Type":["application/x-www-form-urlencoded; charset=utf-8"],"Cookie":["_login_token_=1ba4686338ee7354395ad13f7d3466c1; _nav_url_=%2Fconfig%2Femail; _nav_title_=%E5%91%8A%E8%AD%A6%E9%82%AE%E7%AE%B1"],"Referer":["http://127.0.0.1:9999/"],"Sec-Ch-Ua":["\"Google Chrome\";v=\"89\", \"Chromium\";v=\"89\", \";Not A Brand\";v=\"99\""],"Sec-Ch-Ua-Mobile":["?0"],"Sec-Fetch-Dest":["empty"],"Sec-Fetch-Mode":["cors"],"Sec-Fetch-Site":["same-origin"],"Token":["1ba4686338ee7354395ad13f7d3466c1"],"User-Agent":["Mozilla/5.0 (Macintosh; Intel Mac OS X 11_2_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.128 Safari/537.36"],"X-Requested-With":["XMLHttpRequest"]},"body":""},"response":{"header":{"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["0e280059b0d29459d627"],"Vary":["Origin"]},"body":{"username":"admin","nickname":"管理员","mobile":"13888888888"},"http_code":200,"http_code_msg":"OK","cost_seconds":0.005773254},"third_party_requests":null,"debugs":null,"sqls":[{"timestamp":"2021-04-22 17:00:26","stack":"/Users/zy/go_work/src/xueyang/go-gin-api/internal/api/repository/db_repo/admin_repo/gen_admin.go:98","sql":"SELECT * FROM `admin` WHERE is_deleted = -1 AND id = 1 AND is_used = 1 LIMIT 1","rows_affected":1,"cost_seconds":0.001962845}],"redis":[{"timestamp":"2021-04-22 17:00:26","handle":"get","key":"go-gin-api:admin:1ba4686338ee7354395ad13f7d3466c1","cost_seconds":0.000528035},{"timestamp":"2021-04-22 17:00:26","handle":"get","key":"go-gin-api:authorized:admin","cost_seconds":0.000167604}],"grpc":null,"success":true,"cost_seconds":0.005773764}}
{"level":"info","time":"2021-04-22 17:00:31","caller":"core/core.go:474","msg":"core-interceptor","domain":"go-gin-api[fat]","method":"GET","path":"/api/authorized?page=1&page_size=10","http_code":200,"business_code":0,"success":true,"cost_seconds":0.002338727,"trace_id":"5c8177ae55c90359d093","trace_info":{"trace_id":"5c8177ae55c90359d093","request":{"ttl":"un-limit","method":"GET","decoded_url":"/api/authorized?page=1&page_size=10","header":{"Accept":["*/*"],"Accept-Encoding":["gzip, deflate, br"],"Accept-Language":["zh-CN,zh;q=0.9,en;q=0.8"],"Authorization":["admin +Qfsd9EmHXu78x5CAFJmv1o2vmLkDYm5EnaCSmvdUn0="],"Authorization-Date":["2021-04-22 17:00:31"],"Connection":["keep-alive"],"Content-Type":["application/x-www-form-urlencoded; charset=utf-8"],"Cookie":["_login_token_=1ba4686338ee7354395ad13f7d3466c1; _nav_url_=%2Fauthorized%2Flist; _nav_title_=%E8%B0%83%E7%94%A8%E6%96%B9"],"Referer":["http://127.0.0.1:9999/authorized/list"],"Sec-Ch-Ua":["\"Google Chrome\";v=\"89\", \"Chromium\";v=\"89\", \";Not A Brand\";v=\"99\""],"Sec-Ch-Ua-Mobile":["?0"],"Sec-Fetch-Dest":["empty"],"Sec-Fetch-Mode":["cors"],"Sec-Fetch-Site":["same-origin"],"Token":["1ba4686338ee7354395ad13f7d3466c1"],"User-Agent":["Mozilla/5.0 (Macintosh; Intel Mac OS X 11_2_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.128 Safari/537.36"],"X-Requested-With":["XMLHttpRequest"]},"body":""},"response":{"header":{"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["5c8177ae55c90359d093"],"Vary":["Origin"]},"body":{"list":[{"id":1,"hashid":"zjON6am6eMdR","business_key":"admin","business_secret":"12878dd962115106db6d","business_developer":"管理员","remark":"管理面板调用","is_used":1,"created_at":"2021-04-20 16:12:10","created_user":"init","updated_at":"2021-04-20 16:12:10","updated_user":""}],"pagination":{"total":1,"current_page":1,"pre_page_count":10}},"http_code":200,"http_code_msg":"OK","cost_seconds":0.002338149},"third_party_requests":null,"debugs":null,"sqls":[{"timestamp":"2021-04-22 17:00:31","stack":"/Users/zy/go_work/src/xueyang/go-gin-api/internal/api/repository/db_repo/authorized_repo/gen_authorized.go:98","sql":"SELECT * FROM `authorized` WHERE is_deleted = -1 ORDER BY id DESC LIMIT 10","rows_affected":1,"cost_seconds":0.000767457},{"timestamp":"2021-04-22 17:00:31","stack":"/Users/zy/go_work/src/xueyang/go-gin-api/internal/api/repository/db_repo/authorized_repo/gen_authorized.go:71","sql":"SELECT count(1) FROM `authorized` WHERE is_deleted = -1 ","rows_affected":1,"cost_seconds":0.000601726}],"redis":[{"timestamp":"2021-04-22 17:00:31","handle":"get","key":"go-gin-api:admin:1ba4686338ee7354395ad13f7d3466c1","cost_seconds":0.000133234},{"timestamp":"2021-04-22 17:00:31","handle":"get","key":"go-gin-api:authorized:admin","cost_seconds":0.000163978}],"grpc":null,"success":true,"cost_seconds":0.002338727}}
{"level":"info","time":"2021-04-22 17:02:07","caller":"core/core.go:474","msg":"core-interceptor","domain":"go-gin-api[fat]","method":"GET","path":"/graphql","http_code":200,"business_code":0,"success":true,"cost_seconds":0.00028559,"trace_id":"3758f0352bf08e83e259","trace_info":{"trace_id":"3758f0352bf08e83e259","request":{"ttl":"un-limit","method":"GET","decoded_url":"/graphql","header":{"Accept":["text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"],"Accept-Encoding":["gzip, deflate, br"],"Accept-Language":["zh-CN,zh;q=0.9,en;q=0.8"],"Connection":["keep-alive"],"Cookie":["_login_token_=1ba4686338ee7354395ad13f7d3466c1; _nav_url_=%2Ftool%2Flogs; _nav_title_=%E8%B0%83%E7%94%A8%E6%97%A5%E5%BF%97"],"Referer":["http://127.0.0.1:9999/"],"Sec-Ch-Ua":["\"Google Chrome\";v=\"89\", \"Chromium\";v=\"89\", \";Not A Brand\";v=\"99\""],"Sec-Ch-Ua-Mobile":["?0"],"Sec-Fetch-Dest":["document"],"Sec-Fetch-Mode":["navigate"],"Sec-Fetch-Site":["same-origin"],"Sec-Fetch-User":["?1"],"Upgrade-Insecure-Requests":["1"],"User-Agent":["Mozilla/5.0 (Macintosh; Intel Mac OS X 11_2_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.128 Safari/537.36"]},"body":""},"response":{"header":{"Content-Type":["text/html"],"Vary":["Origin"]},"body":null,"http_code":200,"http_code_msg":"OK","cost_seconds":0.000284392},"third_party_requests":null,"debugs":null,"sqls":null,"redis":null,"grpc":null,"success":true,"cost_seconds":0.00028559}}
{"level":"info","time":"2021-04-22 17:26:37","caller":"core/core.go:474","msg":"core-interceptor","domain":"go-gin-api[fat]","method":"POST","path":"/login/web","http_code":400,"business_code":10109,"success":false,"cost_seconds":0.004191844,"trace_id":"48f68f5b041066b99e26","trace_info":{"trace_id":"48f68f5b041066b99e26","request":{"ttl":"un-limit","method":"POST","decoded_url":"/login/web","header":{"Accept":["*/*"],"Accept-Encoding":["gzip, deflate, br"],"Cache-Control":["no-cache"],"Connection":["keep-alive"],"Content-Length":["0"],"Postman-Token":["e605155e-a5ea-403b-9818-74f4610c82e3"],"User-Agent":["PostmanRuntime/7.26.10"]},"body":""},"response":{"header":{"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["48f68f5b041066b99e26"],"Vary":["Origin"]},"body":{"HttpCode":400,"BusinessCode":10109,"Message":"Signature Error","Err":{}},"business_code":10109,"business_code_msg":"Signature Error","http_code":400,"http_code_msg":"Bad Request","cost_seconds":0.004191298},"third_party_requests":null,"debugs":null,"sqls":null,"redis":null,"grpc":null,"success":false,"cost_seconds":0.004191844},"error":"Header 中缺少 Authorization 参数","errorVerbose":"Header 中缺少 Authorization 参数\nexams-api/internal/router/middleware.(*middleware).Signature.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/router/middleware/middle_signature.go:31\nexams-api/internal/pkg/core.wrapHandlers.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:214\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func3\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:505\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func2\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:487\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:336\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/gin.go:409\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/gin.go:367\nexams-api/internal/pkg/core.(*mux).ServeHTTP\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:234\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:2887\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:1952\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1371\nexams-api/pkg/errno.(*err).WithErr\n\t/Users/zy/go_work/src/xueyang/go-gin-api/pkg/errno/errno.go:46\nexams-api/internal/router/middleware.(*middleware).Signature.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/router/middleware/middle_signature.go:31\nexams-api/internal/pkg/core.wrapHandlers.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:214\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func3\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:505\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func2\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:487\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\nexams-api/internal/pkg/core.New.func1\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:336\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/context.go:161\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/gin.go:409\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/zy/go_work/src/xueyang/go-gin-api/vendor/github.com/gin-gonic/gin/gin.go:367\nexams-api/internal/pkg/core.(*mux).ServeHTTP\n\t/Users/zy/go_work/src/xueyang/go-gin-api/internal/pkg/core/core.go:234\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:2887\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:1952\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1371"}
{"level":"info","time":"2021-04-22 18:12:14","caller":"core/core.go:474","msg":"core-interceptor","domain":"go-gin-api[fat]","method":"GET","path":"/api/authorized?page=1&page_size=10","http_code":200,"business_code":0,"success":true,"cost_seconds":3.254399346,"trace_id":"c6f5f368e9906fb20f16","trace_info":{"trace_id":"c6f5f368e9906fb20f16","request":{"ttl":"un-limit","method":"GET","decoded_url":"/api/authorized?page=1&page_size=10","header":{"Accept":["*/*"],"Accept-Encoding":["gzip, deflate, br"],"Accept-Language":["zh-CN,zh;q=0.9,en;q=0.8"],"Authorization":["admin /l+FczF5Czc2D/v19quihDpS2QDI8ZreKtZiL/D8F4Q="],"Authorization-Date":["2021-04-22 18:12:11"],"Connection":["keep-alive"],"Content-Type":["application/x-www-form-urlencoded; charset=utf-8"],"Cookie":["_login_token_=1ba4686338ee7354395ad13f7d3466c1; _nav_url_=%2Fauthorized%2Flist; _nav_title_=%E8%B0%83%E7%94%A8%E6%96%B9"],"Referer":["http://127.0.0.1:9999/authorized/list"],"Sec-Ch-Ua":["\"Google Chrome\";v=\"89\", \"Chromium\";v=\"89\", \";Not A Brand\";v=\"99\""],"Sec-Ch-Ua-Mobile":["?0"],"Sec-Fetch-Dest":["empty"],"Sec-Fetch-Mode":["cors"],"Sec-Fetch-Site":["same-origin"],"Token":["1ba4686338ee7354395ad13f7d3466c1"],"User-Agent":["Mozilla/5.0 (Macintosh; Intel Mac OS X 11_2_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.128 Safari/537.36"],"X-Requested-With":["XMLHttpRequest"]},"body":""},"response":{"header":{"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["c6f5f368e9906fb20f16"],"Vary":["Origin"]},"body":{"list":[{"id":1,"hashid":"zjON6am6eMdR","business_key":"admin","business_secret":"12878dd962115106db6d","business_developer":"管理员","remark":"管理面板调用","is_used":1,"created_at":"2021-04-20 16:12:10","created_user":"init","updated_at":"2021-04-20 16:12:10","updated_user":""}],"pagination":{"total":1,"current_page":1,"pre_page_count":10}},"http_code":200,"http_code_msg":"OK","cost_seconds":3.254249026},"third_party_requests":null,"debugs":null,"sqls":[{"timestamp":"2021-04-22 18:12:14","stack":"/Users/zy/go_work/src/xueyang/go-gin-api/internal/api/repository/db_repo/authorized_repo/gen_authorized.go:98","sql":"SELECT * FROM `authorized` WHERE is_deleted = -1 ORDER BY id DESC LIMIT 10","rows_affected":1,"cost_seconds":0.054750868},{"timestamp":"2021-04-22 18:12:14","stack":"/Users/zy/go_work/src/xueyang/go-gin-api/internal/api/repository/db_repo/authorized_repo/gen_authorized.go:71","sql":"SELECT count(1) FROM `authorized` WHERE is_deleted = -1 ","rows_affected":1,"cost_seconds":0.002250727}],"redis":[{"timestamp":"2021-04-22 18:12:14","handle":"get","key":"go-gin-api:admin:1ba4686338ee7354395ad13f7d3466c1","cost_seconds":0.524601908},{"timestamp":"2021-04-22 18:12:14","handle":"get","key":"go-gin-api:authorized:admin","cost_seconds":0.00052738}],"grpc":null,"success":true,"cost_seconds":3.254399346}}
{"level":"info","time":"2021-04-22 21:19:19","caller":"core/core.go:474","msg":"core-interceptor","domain":"go-gin-api[fat]","method":"GET","path":"/api/admin/info","http_code":200,"business_code":0,"success":true,"cost_seconds":0.247303247,"trace_id":"92026b7607cf2740c81d","trace_info":{"trace_id":"92026b7607cf2740c81d","request":{"ttl":"un-limit","method":"GET","decoded_url":"/api/admin/info","header":{"Accept":["*/*"],"Accept-Encoding":["gzip, deflate, br"],"Accept-Language":["zh-CN,zh;q=0.9,en;q=0.8"],"Authorization":["admin KwjKdT908J0JMDW+XJk2FetR4NwSLNEhzlApoOcwVFI="],"Authorization-Date":["2021-04-22 21:19:18"],"Connection":["keep-alive"],"Content-Type":["application/x-www-form-urlencoded; charset=utf-8"],"Cookie":["_login_token_=1ba4686338ee7354395ad13f7d3466c1; _nav_url_=%2Fhandlergen; _nav_title_=handlergen"],"Referer":["http://127.0.0.1:9999/"],"Sec-Ch-Ua":["\"Google Chrome\";v=\"89\", \"Chromium\";v=\"89\", \";Not A Brand\";v=\"99\""],"Sec-Ch-Ua-Mobile":["?0"],"Sec-Fetch-Dest":["empty"],"Sec-Fetch-Mode":["cors"],"Sec-Fetch-Site":["same-origin"],"Token":["1ba4686338ee7354395ad13f7d3466c1"],"User-Agent":["Mozilla/5.0 (Macintosh; Intel Mac OS X 11_2_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.128 Safari/537.36"],"X-Requested-With":["XMLHttpRequest"]},"body":""},"response":{"header":{"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["92026b7607cf2740c81d"],"Vary":["Origin"]},"body":{"username":"admin","nickname":"管理员","mobile":"13888888888"},"http_code":200,"http_code_msg":"OK","cost_seconds":0.247299849},"third_party_requests":null,"debugs":null,"sqls":[{"timestamp":"2021-04-22 21:19:19","stack":"/Users/zy/go_work/src/xueyang/go-gin-api/internal/api/repository/db_repo/admin_repo/gen_admin.go:98","sql":"SELECT * FROM `admin` WHERE is_deleted = -1 AND id = 1 AND is_used = 1 LIMIT 1","rows_affected":1,"cost_seconds":0.085804531}],"redis":[{"timestamp":"2021-04-22 21:19:18","handle":"get","key":"go-gin-api:admin:1ba4686338ee7354395ad13f7d3466c1","cost_seconds":0.042733578},{"timestamp":"2021-04-22 21:19:19","handle":"get","key":"go-gin-api:authorized:admin","cost_seconds":0.004131354}],"grpc":null,"success":true,"cost_seconds":0.247303247}}
{"level":"info","time":"2021-04-22 21:27:23","caller":"go-gin-api/main.go:70","msg":"server shutdown success","domain":"go-gin-api[fat]"}
{"level":"info","time":"2021-04-22 21:27:23","caller":"go-gin-api/main.go:80","msg":"dbw close success","domain":"go-gin-api[fat]"}
{"level":"info","time":"2021-04-22 21:27:23","caller":"go-gin-api/main.go:86","msg":"dbr close success","domain":"go-gin-api[fat]"}
{"level":"info","time":"2021-04-22 21:27:23","caller":"go-gin-api/main.go:97","msg":"cache close success","domain":"go-gin-api[fat]"}
